import{u as E,r as _,o as f,c as V,w as a,h as r,t as d,f as e,d as C,a as l,b as t,v as h,x as v,M as F,l as g,e as k,L,n as D,y as R}from"./app.9995b85c.js";import{_ as z}from"./Button.8b66cec4.js";import{_ as A}from"./FormSection.34ce0bd1.js";import{_ as $}from"./Input.c49b17a8.js";import{_ as y}from"./InputError.6effe78a.js";import{_ as b}from"./Label.95def234.js";import{_ as M}from"./ActionMessage.d5af3d18.js";import{_ as x}from"./SecondaryButton.f279d83e.js";import{m as p}from"./matice.dff5312f.js";import"./SectionTitle.1fb5c938.js";import"./_plugin-vue_export-helper.cdc0426e.js";const T={key:0,class:"col-span-6 sm:col-span-4"},O={class:"mt-2"},Y=["src","alt"],q={class:"mt-2"},G={class:"col-span-6 sm:col-span-4"},H={class:"col-span-6 sm:col-span-4"},J={key:0},K={class:"text-sm mt-2"},Q=r(" Your email address is unverified. "),W=r(" Click here to re-send the verification email. "),X={class:"mt-2 font-medium text-sm text-green-600"},Z=r(" Saved. "),ue={__name:"UpdateProfileInformationForm",props:{user:Object},setup(m){const w=m,o=E({_method:"PUT",name:w.user.name,email:w.user.email,photo:null}),P=_(null),c=_(null),n=_(null),I=()=>{n.value&&(o.photo=n.value.files[0]),o.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>S()})},N=()=>{P.value=!0},U=()=>{n.value.click()},B=()=>{const s=n.value.files[0];if(!s)return;const i=new FileReader;i.onload=u=>{c.value=u.target.result},i.readAsDataURL(s)},j=()=>{R.Inertia.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{c.value=null,S()}})},S=()=>{var s;(s=n.value)!=null&&s.value&&(n.value.value=null)};return(s,i)=>(f(),V(A,{onSubmitted:I},{title:a(()=>[r(d(e(p.trans)("profile.Profile_informations"))+", ",1)]),description:a(()=>[r(d(e(p.trans)("profile.Update_infos_email"))+". ",1)]),form:a(()=>[s.$page.props.jetstream.managesProfilePhotos?(f(),C("div",T,[l("input",{ref_key:"photoInput",ref:n,type:"file",class:"hidden",onChange:B},null,544),t(b,{for:"photo",value:"profile.Photo"}),h(l("div",O,[l("img",{src:m.user.profile_photo_url,alt:m.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,Y)],512),[[v,!c.value]]),h(l("div",q,[l("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:F("background-image: url('"+c.value+"');")},null,4)],512),[[v,c.value]]),t(x,{class:"mt-2 mr-2",type:"button",onClick:g(U,["prevent"])},{default:a(()=>[r(d(e(p.trans)("profile.Select_new_photo")),1)]),_:1},8,["onClick"]),m.user.profile_photo_path?(f(),V(x,{key:0,type:"button",class:"mt-2",onClick:g(j,["prevent"])},{default:a(()=>[r(d(e(p.trans)("profile.Remove_photo")),1)]),_:1},8,["onClick"])):k("",!0),t(y,{message:e(o).errors.photo,class:"mt-2"},null,8,["message"])])):k("",!0),l("div",G,[t(b,{for:"name",value:"auth.Name"}),t($,{id:"name",modelValue:e(o).name,"onUpdate:modelValue":i[0]||(i[0]=u=>e(o).name=u),type:"text",class:"mt-1 block w-full",autocomplete:"name"},null,8,["modelValue"]),t(y,{message:e(o).errors.name,class:"mt-2"},null,8,["message"])]),l("div",H,[t(b,{for:"email",value:"auth.Email"}),t($,{id:"email",modelValue:e(o).email,"onUpdate:modelValue":i[1]||(i[1]=u=>e(o).email=u),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),t(y,{message:e(o).errors.email,class:"mt-2"},null,8,["message"]),s.$page.props.jetstream.hasEmailVerification&&m.user.email_verified_at===null?(f(),C("div",J,[l("p",K,[Q,t(e(L),{href:s.route("verification.send"),method:"post",as:"button",class:"underline text-gray-600 hover:text-gray-900",onClick:g(N,["prevent"])},{default:a(()=>[W]),_:1},8,["href","onClick"])]),h(l("div",X," A new verification link has been sent to your email address. ",512),[[v,P.value]])])):k("",!0)])]),actions:a(()=>[t(M,{on:e(o).recentlySuccessful,class:"mr-3"},{default:a(()=>[Z]),_:1},8,["on"]),t(z,{class:D({"opacity-25":e(o).processing}),disabled:e(o).processing},{default:a(()=>[r(d(e(p.trans)("btn.Save")),1)]),_:1},8,["class","disabled"])]),_:1}))}};export{ue as default};
