import{u as x,r as C,o as n,d as l,b as a,w as s,e as u,h as r,t as c,f as t,a as o,F as T,g as R,n as v,y as H,j as K}from"./app.9995b85c.js";import{_ as Q}from"./ActionMessage.d5af3d18.js";import{_ as B}from"./ActionSection.1cf3c8b4.js";import{_ as F}from"./Button.8b66cec4.js";import{_ as z}from"./ConfirmationModal.1f6092bc.js";import{_ as P}from"./DangerButton.561b78f9.js";import{_ as W}from"./DialogModal.4a3cd242.js";import{_ as X}from"./FormSection.34ce0bd1.js";import{_ as Y}from"./Input.c49b17a8.js";import{_ as V}from"./InputError.6effe78a.js";import{_ as L}from"./Label.95def234.js";import{_ as S}from"./SecondaryButton.f279d83e.js";import{J as A}from"./SectionBorder.f08e0246.js";import{m as y}from"./matice.dff5312f.js";import"./SectionTitle.1fb5c938.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./Modal.93a9b59f.js";const Z={key:0},ee={class:"col-span-6"},te={class:"max-w-xl text-sm text-gray-600"},se={class:"col-span-6 sm:col-span-4"},oe={key:0,class:"col-span-6 lg:col-span-4"},ae={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},ne=["onClick"],le={class:"flex items-center"},re={key:0,class:"ml-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},ie=o("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),me=[ie],ce={class:"mt-2 text-xs text-gray-600 text-left"},de={key:1},ue={class:"space-y-6"},_e={class:"text-gray-600"},ve={class:"flex items-center"},fe=["onClick"],be={key:2},ye=r(" Team Members "),he=r(" All of the people that are part of this team. "),pe={class:"space-y-6"},ge={class:"flex items-center"},ke=["src","alt"],xe={class:"ml-4"},Ce={class:"flex items-center"},Te=["onClick"],Re={key:1,class:"ml-2 text-sm text-gray-400"},we=["onClick"],$e=r(" Manage Role "),Me={key:0},Se={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},Ae=["onClick"],je={class:"flex items-center"},Be={key:0,class:"ml-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},Fe=o("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),ze=[Fe],Pe={class:"mt-2 text-xs text-gray-600"},Ve=r(" Cancel "),Le=r(" Save "),Ne=r(" Leave Team "),Oe=r(" Are you sure you would like to leave this team? "),Ee=r(" Cancel "),Ie=r(" Leave "),Je=r(" Remove Team Member "),De=r(" Are you sure you would like to remove this person from the team? "),Ue=r(" Cancel "),qe=r(" Remove "),mt={__name:"TeamMemberManager",props:{team:Object,availableRoles:Array,userPermissions:Object},setup(i){const p=i,d=x({email:"",role:null}),f=x({role:null}),w=x(),$=x(),g=C(!1),M=C(null),k=C(!1),h=C(null),N=()=>{d.post(route("team-members.store",p.team),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>d.reset()})},O=_=>{H.Inertia.delete(route("team-invitations.destroy",_),{preserveScroll:!0})},E=_=>{M.value=_,f.role=_.membership.role,g.value=!0},I=()=>{f.put(route("team-members.update",[p.team,M.value]),{preserveScroll:!0,onSuccess:()=>g.value=!1})},J=()=>{k.value=!0},D=()=>{w.delete(route("team-members.destroy",[p.team,K().props.value.user]))},U=_=>{h.value=_},q=()=>{$.delete(route("team-members.destroy",[p.team,h.value]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>h.value=null})},j=_=>p.availableRoles.find(m=>m.key===_).name;return(_,m)=>(n(),l("div",null,[i.userPermissions.canAddTeamMembers?(n(),l("div",Z,[a(A),a(X,{onSubmitted:N},{title:s(()=>[r(c(t(y.trans)("team.Add_Team_Member")),1)]),description:s(()=>[r(c(t(y.trans)("team.Add_team_member_description"))+". ",1)]),form:s(()=>[o("div",ee,[o("div",te,c(t(y.trans)("team.Add_team_member_form_intro"))+". ",1)]),o("div",se,[a(L,{for:"email",value:"auth.Email"}),a(Y,{id:"email",modelValue:t(d).email,"onUpdate:modelValue":m[0]||(m[0]=e=>t(d).email=e),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),a(V,{message:t(d).errors.email,class:"mt-2"},null,8,["message"])]),i.availableRoles.length>0?(n(),l("div",oe,[a(L,{for:"roles",value:"auth.Role"}),a(V,{message:t(d).errors.role,class:"mt-2"},null,8,["message"]),o("div",ae,[(n(!0),l(T,null,R(i.availableRoles,(e,b)=>(n(),l("button",{key:e.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":b>0,"rounded-b-none":b!=Object.keys(i.availableRoles).length-1}]),onClick:G=>t(d).role=e.key},[o("div",{class:v({"opacity-50":t(d).role&&t(d).role!=e.key})},[o("div",le,[o("div",{class:v(["text-sm text-gray-600",{"font-semibold":t(d).role==e.key}])},c(e.name),3),t(d).role==e.key?(n(),l("svg",re,me)):u("",!0)]),o("div",ce,c(e.description),1)],2)],10,ne))),128))])])):u("",!0)]),actions:s(()=>[a(Q,{on:t(d).recentlySuccessful,class:"mr-3"},{default:s(()=>[r(c(t(y.trans)("app.Added"))+". ",1)]),_:1},8,["on"]),a(F,{class:v({"opacity-25":t(d).processing}),disabled:t(d).processing},{default:s(()=>[r(c(t(y.trans)("btn.Add")),1)]),_:1},8,["class","disabled"])]),_:1})])):u("",!0),i.team.team_invitations.length>0&&i.userPermissions.canAddTeamMembers?(n(),l("div",de,[a(A),a(B,{class:"mt-10 sm:mt-0"},{title:s(()=>[r(c(t(y.trans)("team.Team_invitations_pending")),1)]),description:s(()=>[r(c(t(y.trans)("team.Team_invitations_pending_description"))+". ",1)]),content:s(()=>[o("div",ue,[(n(!0),l(T,null,R(i.team.team_invitations,e=>(n(),l("div",{key:e.id,class:"flex items-center justify-between"},[o("div",_e,c(e.email),1),o("div",ve,[i.userPermissions.canRemoveTeamMembers?(n(),l("button",{key:0,class:"cursor-pointer ml-6 text-sm text-red-500 focus:outline-none",onClick:b=>O(e)}," Cancel ",8,fe)):u("",!0)])]))),128))])]),_:1})])):u("",!0),i.team.users.length>0?(n(),l("div",be,[a(A),a(B,{class:"mt-10 sm:mt-0"},{title:s(()=>[ye]),description:s(()=>[he]),content:s(()=>[o("div",pe,[(n(!0),l(T,null,R(i.team.users,e=>(n(),l("div",{key:e.id,class:"flex items-center justify-between"},[o("div",ge,[o("img",{class:"w-8 h-8 rounded-full",src:e.profile_photo_url,alt:e.name},null,8,ke),o("div",xe,c(e.name),1)]),o("div",Ce,[i.userPermissions.canAddTeamMembers&&i.availableRoles.length?(n(),l("button",{key:0,class:"ml-2 text-sm text-gray-400 underline",onClick:b=>E(e)},c(j(e.membership.role)),9,Te)):i.availableRoles.length?(n(),l("div",Re,c(j(e.membership.role)),1)):u("",!0),_.$page.props.user.id===e.id?(n(),l("button",{key:2,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:J}," Leave ")):u("",!0),i.userPermissions.canRemoveTeamMembers?(n(),l("button",{key:3,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:b=>U(e)}," Remove ",8,we)):u("",!0)])]))),128))])]),_:1})])):u("",!0),a(W,{show:g.value,onClose:m[2]||(m[2]=e=>g.value=!1)},{title:s(()=>[$e]),content:s(()=>[M.value?(n(),l("div",Me,[o("div",Se,[(n(!0),l(T,null,R(i.availableRoles,(e,b)=>(n(),l("button",{key:e.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":b>0,"rounded-b-none":b!==Object.keys(i.availableRoles).length-1}]),onClick:G=>t(f).role=e.key},[o("div",{class:v({"opacity-50":t(f).role&&t(f).role!==e.key})},[o("div",je,[o("div",{class:v(["text-sm text-gray-600",{"font-semibold":t(f).role===e.key}])},c(e.name),3),t(f).role===e.key?(n(),l("svg",Be,ze)):u("",!0)]),o("div",Pe,c(e.description),1)],2)],10,Ae))),128))])])):u("",!0)]),footer:s(()=>[a(S,{onClick:m[1]||(m[1]=e=>g.value=!1)},{default:s(()=>[Ve]),_:1}),a(F,{class:v(["ml-3",{"opacity-25":t(f).processing}]),disabled:t(f).processing,onClick:I},{default:s(()=>[Le]),_:1},8,["class","disabled"])]),_:1},8,["show"]),a(z,{show:k.value,onClose:m[4]||(m[4]=e=>k.value=!1)},{title:s(()=>[Ne]),content:s(()=>[Oe]),footer:s(()=>[a(S,{onClick:m[3]||(m[3]=e=>k.value=!1)},{default:s(()=>[Ee]),_:1}),a(P,{class:v(["ml-3",{"opacity-25":t(w).processing}]),disabled:t(w).processing,onClick:D},{default:s(()=>[Ie]),_:1},8,["class","disabled"])]),_:1},8,["show"]),a(z,{show:h.value,onClose:m[6]||(m[6]=e=>h.value=null)},{title:s(()=>[Je]),content:s(()=>[De]),footer:s(()=>[a(S,{onClick:m[5]||(m[5]=e=>h.value=null)},{default:s(()=>[Ue]),_:1}),a(P,{class:v(["ml-3",{"opacity-25":t($).processing}]),disabled:t($).processing,onClick:q},{default:s(()=>[qe]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{mt as default};
